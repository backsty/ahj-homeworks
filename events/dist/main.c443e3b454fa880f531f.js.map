{"version":3,"file":"main.c443e3b454fa880f531f.js","mappings":"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","sources":["webpack://goblin-game/./src/js/Board.js","webpack://goblin-game/./src/js/sprite2D.js","webpack://goblin-game/./src/js/cursors.js","webpack://goblin-game/./src/js/Modal.js","webpack://goblin-game/./src/js/app.js","webpack://goblin-game/./src/js/gamePlay.js"],"sourcesContent":["export default class Board {\r\n  constructor(boardEl) {\r\n    this.board = null;\r\n    this.boardEl = boardEl;\r\n  }\r\n\r\n  initBoard(size) {\r\n    const arr = [];\r\n    let element = '';\r\n\r\n    for (let i = 0; i < size; i++) {\r\n      arr.push([]);\r\n\r\n      for (let j = 0; j < size; j++) {\r\n        arr[i].push(element);\r\n      }\r\n    }\r\n\r\n    this.board = arr;\r\n    this.renderBoard(this.board);\r\n  }\r\n\r\n  renderBoard(board) {\r\n    if (!this.boardEl) {\r\n      throw new Error('boardEl is not defined');\r\n    }\r\n\r\n    const fields = [];\r\n    for (const [i, row] of board.entries()) {\r\n      for (const [j, value] of row.entries()) {\r\n        fields.push(`\r\n          <div class=\"field\" \r\n            data-row=\"${i}\" \r\n            data-col=\"${j}\"\r\n            style=\"grid-row:${i + 1};grid-column:${j + 1};\">\r\n            ${value || ''}\r\n          </div>\r\n        `);\r\n      }\r\n    }\r\n    this.boardEl.innerHTML = fields.join('');\r\n  }\r\n}","export default class Sprite {\r\n  constructor(boardEl) {\r\n    this.sprite = 'sprite';\r\n    this.positionSprite = -1;\r\n    this.boardEl = boardEl;\r\n  }\r\n\r\n  randomPositionSprite(size) {\r\n    const divs = this.boardEl.querySelectorAll('.field');\r\n\r\n    const randomInt = Math.floor(Math.random() * (size ** 2));\r\n    if (this.positionSprite >= 0) {\r\n      divs[this.positionSprite].classList.remove(this.sprite);\r\n      this.positionSprite = -1;\r\n    }\r\n\r\n    divs[randomInt].classList.add(this.sprite);\r\n    this.positionSprite = randomInt;\r\n  }\r\n}","const hammerSVG = `\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"90\" height=\"90\" viewBox=\"0 0 512 512\">\r\n  <path fill=\"#EE8700\" d=\"M299.3 164.6l6.6 323c0.2 9.2-7.2 16.7-16.4 16.7h-62.1c-9.2 0-16.6-7.5-16.4-16.7l6.6-323 2.6-129.2 0.2-11.7c0.2-8.9 7.5-16 16.4-16h43.2c8.9 0 16.2 7.1 16.4 16l0.2 11.7 2.7 129.2z\"/>\r\n  <path fill=\"#3E3B43\" d=\"M392 160c0 2.5-2 4.5-4.5 4.5H299h-84h-70.3c-1.2 0-2.4-0.5-3.3-1.4l-47-50c-7-7.4-7-19 0-26.5l47-50c0.9-0.9 2-1.4 3.3-1.4h75.4h76.4h90.8c2.5 0 4.5 2 4.5 4.5V160z\"/>\r\n</svg>\r\n`;\r\n\r\nconst cursors = {\r\n  auto: 'auto',\r\n  hammer: `url(\"data:image/svg+xml;charset=utf8,${encodeURIComponent(hammerSVG)}\") 45 45, pointer`,\r\n};\r\n\r\nexport default cursors;","export default class Modal {\r\n  constructor(modalEl) {\r\n    this.modalEl = modalEl;\r\n  }\r\n\r\n  show(message) {\r\n    this.modalEl.querySelector('h2').textContent = message;\r\n    this.modalEl.classList.remove('hidden');\r\n  }\r\n\r\n  hide() {\r\n    this.modalEl.classList.add('hidden');\r\n  }\r\n}","import '../css/style.css';\r\nimport GamePlay from './gamePlay.js';\r\n\r\nconst boardEl = document.getElementById('board');\r\nconst modalEl = document.getElementById('modal');\r\nconst deadEl = document.getElementById('dead');\r\nconst lostEl = document.getElementById('lost');\r\n\r\nif (!boardEl || !modalEl || !deadEl || !lostEl) {\r\n  throw new Error('One or more elements are not defined in app.js');\r\n}\r\n\r\nconst gamePlay = new GamePlay(boardEl, modalEl, deadEl, lostEl);\r\ngamePlay.startGame();","import GameBoard from './Board.js';\r\nimport Sprite from './sprite2D.js';\r\nimport cursors from './cursors.js';\r\nimport Modal from './Modal.js';\r\n\r\nexport default class GamePlay {\r\n  constructor(boardEl, modalEl, deadEl, lostEl) {\r\n    this.size = 4;\r\n    this.boardEl = boardEl;\r\n    this.modalEl = modalEl;\r\n    this.countDead = deadEl;\r\n    this.countLost = lostEl;\r\n    this.count = null;\r\n  }\r\n\r\n  startGame() {\r\n    if (!this.boardEl || !this.modalEl || !this.countDead || !this.countLost) {\r\n      throw new Error('One or more elements are not defined');\r\n    }\r\n\r\n    const board = new GameBoard(this.boardEl);\r\n    board.initBoard(this.size);\r\n\r\n    const sprite = new Sprite(this.boardEl);\r\n    const modal = new Modal(this.modalEl);\r\n\r\n    this.onCellClick(sprite);\r\n    this.onButtonClick(modal);\r\n\r\n    this.gameInterval = setInterval(() => {\r\n      sprite.randomPositionSprite(this.size);\r\n\r\n      this.countLost.textContent = +this.countLost.textContent + this.count;\r\n\r\n      if (this.count !== 1) {\r\n        setTimeout(() => {\r\n          this.count = 1;\r\n        }, 1000);\r\n      }\r\n\r\n      this.checkWinner();\r\n    }, 1000);\r\n  }\r\n\r\n  setCursor(cursor) {\r\n    const board = document.getElementById('board');\r\n    if (board) {\r\n      if (cursor === cursors.hammer) {\r\n        board.classList.add('hammer-cursor');\r\n      } else {\r\n        board.classList.remove('hammer-cursor');\r\n      }\r\n    }\r\n  }\r\n\r\n  onCellClick() {\r\n    const fields = document.querySelectorAll('.field');\r\n\r\n    for (let i = 0; i < fields.length; i++) {\r\n      fields[i].addEventListener('click', () => {\r\n        if (fields[i].classList.contains('sprite')) {\r\n          fields[i].classList.remove('sprite');\r\n          this.countDead.textContent = +this.countDead.textContent + 1;\r\n\r\n          this.setCursor(cursors.hammer);\r\n\r\n          fields[i].classList.add('hit');\r\n          setTimeout(() => {\r\n            fields[i].classList.remove('hit');\r\n          }, 200);\r\n\r\n\r\n        } else {\r\n          this.countLost.textContent = +this.countLost.textContent + 1;\r\n        }\r\n        this.checkWinner();\r\n        this.count = 0;\r\n      });\r\n    }\r\n  }\r\n\r\n  onButtonClick() {\r\n    const resetButtons = document.querySelectorAll('.reset');\r\n\r\n    for (const btn of resetButtons) {\r\n      btn.addEventListener('click', () => {\r\n        if (!this.modalEl.classList.contains('hidden')) {\r\n          this.modalEl.classList.add('hidden');\r\n        }\r\n        this.reset();\r\n        this.startGame();\r\n      });\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    this.countDead.textContent = 0;\r\n    this.countLost.textContent = 0;\r\n    clearInterval(this.gameInterval);\r\n  }\r\n\r\n  checkWinner() {\r\n    if (this.countDead.textContent == 5) {\r\n      this.showWinner('🍾 Победа! 🍾');\r\n    }\r\n\r\n    if (this.countLost.textContent > 5) {\r\n      this.showWinner('Вы проиграли!');\r\n    }\r\n  }\r\n\r\n  showWinner(status) {\r\n    const header = this.modalEl.querySelector('h2');\r\n    header.textContent = status;\r\n    this.modalEl.classList.remove('hidden');\r\n    clearInterval(this.gameInterval);\r\n    this.reset();\r\n  }\r\n}\r\n"],"names":["Board","constructor","boardEl","this","board","initBoard","size","arr","i","push","j","renderBoard","Error","fields","row","entries","value","innerHTML","join","Sprite","sprite","positionSprite","randomPositionSprite","divs","querySelectorAll","randomInt","Math","floor","random","classList","remove","add","auto","hammer","encodeURIComponent","Modal","modalEl","show","message","querySelector","textContent","hide","document","getElementById","deadEl","lostEl","gamePlay","countDead","countLost","count","startGame","GameBoard","modal","onCellClick","onButtonClick","gameInterval","setInterval","setTimeout","checkWinner","setCursor","cursor","cursors","length","addEventListener","contains","resetButtons","btn","reset","clearInterval","showWinner","status"],"sourceRoot":""}