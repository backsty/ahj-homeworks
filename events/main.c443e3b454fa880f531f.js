(()=>{"use strict";class t{constructor(t){this.board=null,this.boardEl=t}initBoard(t){const e=[];for(let s=0;s<t;s++){e.push([]);for(let o=0;o<t;o++)e[s].push("")}this.board=e,this.renderBoard(this.board)}renderBoard(t){if(!this.boardEl)throw new Error("boardEl is not defined");const e=[];for(const[s,o]of t.entries())for(const[t,i]of o.entries())e.push(`\n          <div class="field" \n            data-row="${s}" \n            data-col="${t}"\n            style="grid-row:${s+1};grid-column:${t+1};">\n            ${i||""}\n          </div>\n        `);this.boardEl.innerHTML=e.join("")}}class e{constructor(t){this.sprite="sprite",this.positionSprite=-1,this.boardEl=t}randomPositionSprite(t){const e=this.boardEl.querySelectorAll(".field"),s=Math.floor(Math.random()*t**2);this.positionSprite>=0&&(e[this.positionSprite].classList.remove(this.sprite),this.positionSprite=-1),e[s].classList.add(this.sprite),this.positionSprite=s}}const s={auto:"auto",hammer:`url("data:image/svg+xml;charset=utf8,${encodeURIComponent('\n<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 512 512">\n  <path fill="#EE8700" d="M299.3 164.6l6.6 323c0.2 9.2-7.2 16.7-16.4 16.7h-62.1c-9.2 0-16.6-7.5-16.4-16.7l6.6-323 2.6-129.2 0.2-11.7c0.2-8.9 7.5-16 16.4-16h43.2c8.9 0 16.2 7.1 16.4 16l0.2 11.7 2.7 129.2z"/>\n  <path fill="#3E3B43" d="M392 160c0 2.5-2 4.5-4.5 4.5H299h-84h-70.3c-1.2 0-2.4-0.5-3.3-1.4l-47-50c-7-7.4-7-19 0-26.5l47-50c0.9-0.9 2-1.4 3.3-1.4h75.4h76.4h90.8c2.5 0 4.5 2 4.5 4.5V160z"/>\n</svg>\n')}") 45 45, pointer`};class o{constructor(t){this.modalEl=t}show(t){this.modalEl.querySelector("h2").textContent=t,this.modalEl.classList.remove("hidden")}hide(){this.modalEl.classList.add("hidden")}}const i=document.getElementById("board"),n=document.getElementById("modal"),r=document.getElementById("dead"),l=document.getElementById("lost");if(!(i&&n&&r&&l))throw new Error("One or more elements are not defined in app.js");const h=new class{constructor(t,e,s,o){this.size=4,this.boardEl=t,this.modalEl=e,this.countDead=s,this.countLost=o,this.count=null}startGame(){if(!(this.boardEl&&this.modalEl&&this.countDead&&this.countLost))throw new Error("One or more elements are not defined");new t(this.boardEl).initBoard(this.size);const s=new e(this.boardEl),i=new o(this.modalEl);this.onCellClick(s),this.onButtonClick(i),this.gameInterval=setInterval((()=>{s.randomPositionSprite(this.size),this.countLost.textContent=+this.countLost.textContent+this.count,1!==this.count&&setTimeout((()=>{this.count=1}),1e3),this.checkWinner()}),1e3)}setCursor(t){const e=document.getElementById("board");e&&(t===s.hammer?e.classList.add("hammer-cursor"):e.classList.remove("hammer-cursor"))}onCellClick(){const t=document.querySelectorAll(".field");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(()=>{t[e].classList.contains("sprite")?(t[e].classList.remove("sprite"),this.countDead.textContent=+this.countDead.textContent+1,this.setCursor(s.hammer),t[e].classList.add("hit"),setTimeout((()=>{t[e].classList.remove("hit")}),200)):this.countLost.textContent=+this.countLost.textContent+1,this.checkWinner(),this.count=0}))}onButtonClick(){const t=document.querySelectorAll(".reset");for(const e of t)e.addEventListener("click",(()=>{this.modalEl.classList.contains("hidden")||this.modalEl.classList.add("hidden"),this.reset(),this.startGame()}))}reset(){this.countDead.textContent=0,this.countLost.textContent=0,clearInterval(this.gameInterval)}checkWinner(){5==this.countDead.textContent&&this.showWinner("🍾 Победа! 🍾"),this.countLost.textContent>5&&this.showWinner("Вы проиграли!")}showWinner(t){this.modalEl.querySelector("h2").textContent=t,this.modalEl.classList.remove("hidden"),clearInterval(this.gameInterval),this.reset()}}(i,n,r,l);h.startGame()})();
//# sourceMappingURL=main.c443e3b454fa880f531f.js.map