{"version":3,"file":"main.27d8e8144f5e8f4194c9.js","mappings":"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","sources":["webpack://dnd/webpack/bootstrap","webpack://dnd/webpack/runtime/publicPath","webpack://dnd/./src/js/cursors.js","webpack://dnd/./src/js/PageUi.js","webpack://dnd/./src/js/Utils.js","webpack://dnd/./src/js/app.js","webpack://dnd/./src/js/StateService.js","webpack://dnd/./src/js/PageController.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","__webpack_require__.p = \"/events/\";","import noTouch from '../img/no-touch.svg';\r\nimport touch from '../img/touch.svg';\r\nimport notInterested from '../img/not-interested.svg';\r\n\r\nconst cursors = {\r\n  DEFAULT: 'default',\r\n  GRAB: `url(${noTouch}) 15 15, grab`,\r\n  GRABBING: `url(${touch}) 15 15, grabbing`,\r\n  NOT_ALLOWED: `url(${notInterested}) 15 15, not-allowed`\r\n};\r\n\r\nexport default cursors;\r\n","import trash from '../img/trash.svg';\r\n\r\nexport default class PageUi {\r\n  constructor(data) {\r\n    this.data = data;\r\n    this.container = null;\r\n    this.cardsContainerEl = null;\r\n    this.addCards = null;\r\n    this.forms = null;\r\n    this.cancelBtns = null;\r\n    this.inputs = null;\r\n    this.cards = null;\r\n  }\r\n\r\n  bindToDom(container) {\r\n    if (!(container instanceof HTMLElement)) {\r\n      throw new Error('Контейнер не является элементом \"HTMLElement\"');\r\n    }\r\n    this.container = container;\r\n    if (!this.container) {\r\n      throw new Error('Контейнер не найден');\r\n    }\r\n  }\r\n\r\n  drawUi() {\r\n    this.data.forEach((column) => {\r\n      const columnEl = document.querySelector(`[data-column=\"${column.id}\"]`);\r\n      if (columnEl) {\r\n        const title = columnEl.querySelector('h2');\r\n        title.textContent = column.title;\r\n      }\r\n    });\r\n\r\n    this.addCards = this.container.querySelectorAll('.add-card');\r\n    this.cards = this.container.querySelectorAll('.cards-container');\r\n    this.addCards.forEach(addButton => {\r\n      const form = PageUi.createAddCardForm();\r\n      addButton.parentElement.appendChild(form);\r\n      \r\n      addButton.addEventListener('click', () => {\r\n        addButton.classList.add('hidden');\r\n        form.classList.remove('hidden');\r\n        form.querySelector('.card-input').focus();\r\n      });\r\n    });\r\n  }\r\n\r\n  static createCard(text) {\r\n    const card = document.createElement('div');\r\n    card.className = 'card';\r\n    card.draggable = true;\r\n\r\n    const content = document.createElement('div');\r\n    content.className = 'card-content';\r\n    content.textContent = text;\r\n\r\n    const deleteBtn = document.createElement('img');\r\n    deleteBtn.className = 'card-delete';\r\n    deleteBtn.src = trash;\r\n    deleteBtn.alt = 'Delete';\r\n\r\n    card.appendChild(content);\r\n    card.appendChild(deleteBtn);\r\n\r\n    return card;\r\n  }\r\n\r\n  static createAddCardForm() {\r\n    const form = document.createElement('form');\r\n    form.className = 'add-card-form hidden';\r\n    form.innerHTML = `\r\n      <textarea class=\"card-input\" placeholder=\"Введите название карточки...\"></textarea>\r\n      <div class=\"form-controls\">\r\n        <button type=\"submit\" class=\"add-btn\">Добавить карточку</button>\r\n        <button type=\"button\" class=\"cancel-btn\">×</button>\r\n      </div>\r\n    `;\r\n    \r\n    const textarea = form.querySelector('.card-input');\r\n    textarea.addEventListener('input', function() {\r\n      this.style.height = 'auto';\r\n      this.style.height = this.scrollHeight + 'px';\r\n    });\r\n\r\n    return form;\r\n  }\r\n\r\n  static deleteCard(card) {\r\n    if (card && card.classList.contains('card')) {\r\n      card.remove();\r\n    }\r\n  }\r\n\r\n  static checkBinding() {\r\n    return document.querySelector('.board') !== null;\r\n  }\r\n}\r\n","const data = [\r\n  {\r\n    id: 'todo',\r\n    title: 'Todo',\r\n  },\r\n  {\r\n    id: 'in-progress',\r\n    title: 'In progress',\r\n  },\r\n  {\r\n    id: 'done',\r\n    title: 'Done',\r\n  },\r\n];\r\n\r\nexport default data;","import PageController from './PageController.js';\r\nimport PageUi from './PageUi.js';\r\nimport StateService from './StateService.js';\r\nimport data from './Utils.js';\r\n\r\nconst stateService = new StateService(localStorage);\r\nconst pageUi = new PageUi(data);\r\nconst controller = new PageController(pageUi, stateService);\r\n\r\ncontroller.init();","export default class StateService {\r\n    constructor(storage) {\r\n        this.storage = storage;\r\n    }\r\n\r\n    save(state) {\r\n        this.storage.setItem('state', JSON.stringify(state));\r\n    }\r\n\r\n    load() {\r\n        try {\r\n            const data = this.storage.getItem('state');\r\n            return data ? JSON.parse(data) : {\r\n                todo: [],\r\n                'in-progress': [],\r\n                done: []\r\n            };\r\n        } catch (e) {\r\n            throw new Error('Ошибка при загрузке данных');\r\n        }\r\n    }\r\n};","import cursors from './cursors.js';\r\nimport pageUi from './PageUi.js';\r\n\r\nexport default class PageController {\r\n  constructor(ui, stateService) {\r\n    this.ui = ui;\r\n    this.stateService = stateService;\r\n    this.dragEl = null;\r\n    this.ghostEl = null;\r\n    this.shiftX = null;\r\n    this.shiftY = null;\r\n    this.elInitialX = null;\r\n    this.elInitialY = null;\r\n  }\r\n\r\n  init() {\r\n    this.ui.bindToDom(document.querySelector('.board'));\r\n    this.ui.drawUi();\r\n    this.loadState();\r\n    this.addEventListeners();\r\n  }\r\n\r\n  loadState() {\r\n    const state = this.stateService.load();\r\n    Object.entries(state).forEach(([columnId, cards]) => {\r\n      const container = document.querySelector(`[data-column=\"${columnId}\"] .cards-container`);\r\n      if (container) {\r\n        container.innerHTML = '';\r\n        cards.forEach(cardText => {\r\n          container.appendChild(this.ui.constructor.createCard(cardText));\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  saveState() {\r\n    const state = {};\r\n    this.ui.data.forEach(column => {\r\n      const container = document.querySelector(`[data-column=\"${column.id}\"] .cards-container`);\r\n      if (container) {\r\n        state[column.id] = Array.from(container.children).map(card =>\r\n          card.querySelector('.card-content').textContent,\r\n        );\r\n      }\r\n    });\r\n    this.stateService.save(state);\r\n  }\r\n\r\n  addEventListeners() {\r\n    // Обработчики drag&drop\r\n    document.addEventListener('mousedown', this.onMouseDown.bind(this));\r\n    document.addEventListener('mousemove', this.onMouseMove.bind(this));\r\n    document.addEventListener('mouseup', this.onMouseUp.bind(this));\r\n\r\n    // Обработчик удаления карточки\r\n    this.ui.container.addEventListener('click', (e) => {\r\n      if (e.target.classList.contains('card-delete')) {\r\n        const card = e.target.closest('.card');\r\n        if (card) {\r\n          this.ui.constructor.deleteCard(card);\r\n          this.saveState();\r\n        }\r\n      }\r\n\r\n      // Показать форму при клике на \"Добавить карточку\"\r\n      if (e.target.classList.contains('add-card')) {\r\n        const column = e.target.closest('.column');\r\n        const form = column.querySelector('.add-card-form');\r\n        e.target.classList.add('hidden');\r\n        form.classList.remove('hidden');\r\n        form.querySelector('.card-input').focus();\r\n      }\r\n\r\n      // Скрыть форму при клике на \"Отмена\"\r\n      if (e.target.classList.contains('cancel-btn')) {\r\n        const form = e.target.closest('.add-card-form');\r\n        form.reset();\r\n        form.classList.add('hidden');\r\n        const addButton = form.closest('.column').querySelector('.add-card');\r\n        addButton.classList.remove('hidden');\r\n      }\r\n    });\r\n\r\n    // Обработчик отправки формы\r\n    this.ui.container.addEventListener('submit', (e) => {\r\n      if (e.target.classList.contains('add-card-form')) {\r\n        e.preventDefault();\r\n        const form = e.target;\r\n        const input = form.querySelector('.card-input');\r\n        const text = input.value.trim();\r\n\r\n        if (text) {\r\n          const column = form.closest('.column');\r\n          const container = column.querySelector('.cards-container');\r\n          container.appendChild(this.ui.constructor.createCard(text));\r\n          this.saveState();\r\n        }\r\n\r\n        form.reset();\r\n        form.classList.add('hidden');\r\n        const addButton = form.closest('.column').querySelector('.add-card');\r\n        addButton.classList.remove('hidden');\r\n      }\r\n    });\r\n  }\r\n\r\n  onMouseDown(event) {\r\n    const card = event.target.closest('.card');\r\n    if (!card || event.target.closest('.card-delete')) return;\r\n    event.preventDefault();\r\n  \r\n    this.dragEl = card;\r\n    const rect = card.getBoundingClientRect();\r\n    \r\n    this.shiftX = event.clientX - rect.left;\r\n    this.shiftY = event.clientY - rect.top;\r\n    \r\n    this.dragEl.style.opacity = '0.5';\r\n    document.body.style.cursor = cursors.GRABBING;\r\n  }\r\n\r\n  onMouseMove(event) {\r\n    if (!this.dragEl) return;\r\n    event.preventDefault();\r\n  \r\n    if (!this.ghostEl) {\r\n      this.createGhost(this.dragEl);\r\n    }\r\n  \r\n    const newX = event.clientX - this.shiftX;\r\n    const newY = event.clientY - this.shiftY;\r\n    \r\n    this.ghostEl.style.left = `${newX}px`;\r\n    this.ghostEl.style.top = `${newY}px`;\r\n  \r\n    const columnUnder = event.target.closest('.cards-container');\r\n    if (columnUnder) {\r\n      const closestCard = this.getClosestCard(columnUnder, event.clientY);\r\n      this.updateDropPosition(columnUnder, closestCard);\r\n    }\r\n  }\r\n\r\n  onMouseUp() {\r\n    if (!this.dragEl) return;\r\n\r\n    document.body.style.cursor = cursors.DEFAULT;\r\n    const placeholder = document.querySelector('.ghost-placeholder');\r\n    if (placeholder) {\r\n      placeholder.replaceWith(this.dragEl);\r\n    }\r\n\r\n    this.dragEl.style.opacity = '';\r\n    this.removeGhost();\r\n    this.saveState();\r\n    \r\n    this.dragEl = null;\r\n  }\r\n\r\n  createGhost(element) {\r\n    this.ghostEl = element.cloneNode(true);\r\n    this.ghostEl.classList.add('dragged');\r\n    this.ghostEl.style.position = 'fixed';\r\n    this.ghostEl.style.width = `${element.offsetWidth}px`;\r\n    this.ghostEl.style.height = `${element.offsetHeight}px`;\r\n    this.ghostEl.style.zIndex = '1000';\r\n    this.ghostEl.style.pointerEvents = 'none';\r\n    document.body.appendChild(this.ghostEl);\r\n  }\r\n\r\n  removeGhost() {\r\n    if (this.ghostEl) {\r\n      this.ghostEl.remove();\r\n      this.ghostEl = null;\r\n    }\r\n  }\r\n\r\n  updateDropPosition(container, card) {\r\n    const placeholder = document.querySelector('.ghost-placeholder') \r\n      || document.createElement('div');\r\n    \r\n    placeholder.className = 'ghost-placeholder';\r\n    placeholder.style.height = `${this.dragEl.offsetHeight}px`;\r\n  \r\n    if (card) {\r\n      if (card !== placeholder) {\r\n        card.parentNode.insertBefore(placeholder, card);\r\n      }\r\n    } else {\r\n      container.appendChild(placeholder);\r\n    }\r\n  }\r\n\r\n  getClosestCard(container, y) {\r\n    const cards = [...container.querySelectorAll('.card:not(.dragged)')];\r\n\r\n    return cards.reduce((closest, child) => {\r\n      const box = child.getBoundingClientRect();\r\n      const offset = y - box.top - box.height / 2;\r\n\r\n      if (offset < 0 && offset > closest.offset) {\r\n        return { offset, element: child };\r\n      }\r\n      return closest;\r\n    }, { offset: Number.NEGATIVE_INFINITY }).element;\r\n  }\r\n}\r\n"],"names":["__webpack_require__","DEFAULT","GRAB","GRABBING","NOT_ALLOWED","PageUi","constructor","data","this","container","cardsContainerEl","addCards","forms","cancelBtns","inputs","cards","bindToDom","HTMLElement","Error","drawUi","forEach","column","columnEl","document","querySelector","id","textContent","title","querySelectorAll","addButton","form","createAddCardForm","parentElement","appendChild","addEventListener","classList","add","remove","focus","createCard","text","card","createElement","className","draggable","content","deleteBtn","src","trash","alt","innerHTML","style","height","scrollHeight","deleteCard","contains","checkBinding","stateService","storage","save","state","setItem","JSON","stringify","load","getItem","parse","todo","done","e","localStorage","pageUi","controller","ui","dragEl","ghostEl","shiftX","shiftY","elInitialX","elInitialY","init","loadState","addEventListeners","Object","entries","columnId","cardText","saveState","Array","from","children","map","onMouseDown","bind","onMouseMove","onMouseUp","target","closest","reset","preventDefault","value","trim","event","rect","getBoundingClientRect","clientX","left","clientY","top","opacity","body","cursor","cursors","createGhost","newX","newY","columnUnder","closestCard","getClosestCard","updateDropPosition","placeholder","replaceWith","removeGhost","element","cloneNode","position","width","offsetWidth","offsetHeight","zIndex","pointerEvents","parentNode","insertBefore","y","reduce","child","box","offset","Number","NEGATIVE_INFINITY"],"sourceRoot":""}