(()=>{"use strict";class t{constructor(t){this.originalData=t,this.data=[...t],this.container=document.querySelector(".table-container"),this.sortIndex=0,this.columns=["id","title","year","imdb"],this.sortOrders=["asc","desc"],this.currentSort={field:this.columns[0],order:this.sortOrders[0]}}createTable(){const t=document.createElement("table");for(t.innerHTML='\n      <thead>\n        <tr>\n          <td data-sort="id">id</td>\n          <td data-sort="title">title</td>\n          <td data-sort="year">year</td>\n          <td data-sort="imdb">imdb</td>\n        </tr>\n      </thead>\n      <tbody></tbody>\n    ';this.container.firstChild;)this.container.removeChild(this.container.firstChild);this.container.appendChild(t),this.tbody=t.querySelector("tbody"),this.renderRows()}renderRows(){const t=this.tbody;for(;t.firstChild;)t.removeChild(t.firstChild);this.data.forEach((e=>{const r=document.createElement("tr");r.innerHTML=`\n        <td>#${e.id}</td>\n        <td>${e.title}</td>\n        <td>(${e.year})</td>\n        <td>imdb: ${e.imdb.toFixed(2)}</td>\n      `,t.appendChild(r)}))}sort(){const{field:t,order:e}=this.currentSort,r=[...this.data].sort(((r,i)=>{let d=r[t],o=i[t];return"title"!==t&&(d=Number(d),o=Number(o)),"asc"===e?d>o?1:-1:d<o?1:-1}));this.data=r,this.renderRows(),this.updateSortIndicator()}updateSortIndicator(){this.container.querySelectorAll("th").forEach((t=>{const e=t.dataset.sort===this.currentSort.field?"asc"===this.currentSort.order?" ↑":" ↓":" ↕";t.textContent=t.textContent.replace(/[↕↑↓]/,"")+e}))}nextSort(){const t=Math.floor(this.sortIndex/2),e=this.sortIndex%2;this.currentSort={field:this.columns[t],order:this.sortOrders[e]},this.sortIndex=(this.sortIndex+1)%(2*this.columns.length),this.sort()}startAutoSort(){setInterval((()=>this.nextSort()),2e3)}}const e=[{id:26,title:"Побег из Шоушенка",imdb:9.3,year:1994},{id:25,title:"Крёстный отец",imdb:9.2,year:1972},{id:27,title:"Крёстный отец 2",imdb:9,year:1974},{id:1047,title:"Тёмный рыцарь",imdb:9,year:2008},{id:223,title:"Криминальное чтиво",imdb:8.9,year:1994}];document.addEventListener("DOMContentLoaded",(()=>{try{const r=new t(e);r.createTable(),r.startAutoSort()}catch(t){console.error("Failed to initialize table:",t)}}))})();
//# sourceMappingURL=main.179e92d886429206333d.js.map